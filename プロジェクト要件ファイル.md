# タイトル

Windows用ディレクトリサイズ表示アプリケーション「fat_kill」

## システムの目的

- 選択したディレクトリ配下のサブディレクトリのサイズを表示し、ディスク容量の管理を支援する。

## システムの特徴

- **高速処理**: Rustでバックエンドを実装し、大量のディレクトリでも迅速にサイズ計算を行う。
- **直感的なUI**: PythonのPyQt6を使用し、ユーザーが簡単に操作できるツリー表示のインターフェースを提供。
- **詳細な情報表示**: ディレクトリ名とサイズを人間に理解しやすい単位で表示し、ソート機能も搭載。
- **特殊ディレクトリへの対応**: アクセス不可ディレクトリや隠しディレクトリを識別し、視覚的に区別して表示。
- **安定した動作**: マルチスレッド化により、長時間の処理でもアプリケーションがフリーズしない。

## 主要な機能要件

- **ディレクトリ選択と表示**:
  - ディレクトリ選択ダイアログにより、ユーザーが対象のディレクトリを指定可能。
  - 選択されたディレクトリ配下のサブディレクトリのみをツリー表示で表示。
  - ファイルは表示せず、ディレクトリのみを対象とする。

- **サイズ計算と表示**:
  - 各サブディレクトリのサイズを計算し、人間に理解しやすい単位（KB、MB、GBなど）で表示。
  - サイズの表示は名前とともにリストに表示。

- **ソート機能**:
  - ディレクトリ名やサイズでのソートが可能。
  - サイズのソート時は、単位変換後でも正しく並び替えを行う。

- **特殊ディレクトリの処理**:
  - **アクセス不可ディレクトリ**:
    - アクセス不可の場合、そのディレクトリの探索とサイズ計算をスキップ。
    - ツリーリスト上で赤字表示し、サイズ欄に「アクセス不可」と表示。
  - **隠しディレクトリ**:
    - 通常通りに探索・サイズ計算を行う。
    - ツリーリスト上でグレー表示し、サイズを通常通り表示。

- **ユーザー操作**:
  - **スキャン開始ボタン**: 指定ディレクトリのサイズ計算を開始。
  - **停止ボタン**: サイズ計算処理を中断。

- **バックエンド処理**:
  - Rustで実装し、高速なサイズ計算を実現。
  - マルチスレッド化により、処理中でもアプリケーションがフリーズしない。

- **PythonとRustの連携**:
  - pyo3（バージョン0.18）を使用して、Rustで作成したライブラリをPythonから呼び出し。
  - maturinを使用して、RustコードをPython用のライブラリとしてビルド。

## 非機能要件

- **パフォーマンス**:
  - 大規模なディレクトリ構造でも迅速にサイズ計算を完了する。
  
- **ユーザビリティ**:
  - シンプルで直感的なユーザーインターフェースを提供。
  - アクセス不可ディレクトリや隠しディレクトリを視覚的に区別。

- **信頼性**:
  - 処理中の予期せぬエラーや例外に対する適切なハンドリング。
  - アプリケーションの強制終了やデータの損失を防ぐ。

- **移植性**:
  - PythonやRustがインストールされていないWindows環境（Windows 10およびWindows 11）でも動作。
  - Pyinstallerを使用してexe化し、依存関係を含めた単一の実行ファイルを提供。

- **セキュリティ**:
  - 管理者権限での実行が必要なため、READMEにその旨を明記し、ユーザーに注意喚起。
  - ユーザーのディレクトリ情報を外部に送信しない。

## 開発・運用

- **開発環境**:
  - **フロントエンド**:
    - Python 3.12
    - PyQt6を使用したGUIアプリケーション開発。
    - Poetryによる仮想環境管理。
  - **バックエンド**:
    - Rust言語を使用。
    - pyo3とmaturinでPythonとの連携を実現。
  - **統合開発環境**:
    - Visual Studio Code（VSCode）

- **プロジェクト構成**:
  - **ディレクトリ構造**:
    - `fat_kill/`
      - `py_app/`（Pythonフロントエンド）
        - `main.py`など
        - `Python開発ログ.txt`
        - `TODO.txt`
      - `rust_lib/`（Rustバックエンド）
        - `src/lib.rs`など
        - `Rust開発ログ.txt`
        - `TODO.txt`
      - `開発ログ.txt`（プロジェクト全体のログ）
      - `README.md`（実行手順や注意事項を記載）

- **プロジェクト管理**:
  - GitHubでバージョン管理。
  - 適切なリポジトリを作成し、コードの共有と履歴管理を行う。
  - 各ディレクトリの開発ログとTODOリストで進捗管理。

- **リリース方法**:
  - PyInstallerを使用して、アプリケーションを単一のexeファイルにビルド。
  - リリース版にはPythonやRustの実行環境は不要。
  - READMEで実行環境や管理者権限が必要である旨を明記。

- **運用方針**:
  - **サポート範囲**: Windows 10およびWindows 11のシステムでの動作を保証。
  - **利用者への注意**: ディレクトリ情報へのアクセスが必要なため、自己責任での利用を促す。
  - **アップデート**: 必要に応じて機能追加やバグ修正を実施し、GitHubで公開。
  